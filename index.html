<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recargar Saldo - SociosXIT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'neon-cyan': '#06B6D4',
                        'neon-green': '#10B981',
                        'neon-yellow': '#FBBF24',
                        'neon-pink': '#EC4899',
                    },
                    boxShadow: {
                        'neon-green': '0 0 10px rgba(16, 185, 129, 0.7), 0 0 20px rgba(16, 185, 129, 0.4)',
                        'neon-blue': '0 0 10px rgba(6, 182, 212, 0.7), 0 0 20px rgba(6, 182, 212, 0.4)',
                    }
                }
            }
        }
    </script>
    <style>
        /* Estilos base para el modo oscuro y fuente Inter */
        body {
            background-color: #111827;
            color: #E5E7EB;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 1rem;
        }
        /* Estilo general para el contenedor principal */
        .card {
            background-color: #1F2937;
            border: 1px solid #374151;
        }
        /* Estilo para el botÃ³n principal con efecto neÃ³n */
        .neon-btn {
            background-color: #10B981; /* Neon Green */
            color: #111827;
            font-weight: bold;
            transition: all 0.3s ease-in-out;
        }
        .neon-btn:hover:not(:disabled) {
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.7);
            transform: translateY(-1px);
        }
        /* Clases de utilidad de color */
        .text-neon-green { color: #10B981; }
        .text-neon-cyan { color: #06B6D4; }
        .text-rate { color: #FBBF24; } 

        /* Estilo para los detalles de pago */
        .payment-detail {
            background-color: #111827;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border-left: 4px solid #06B6D4;
        }
    </style>
</head>
<body>

    <div class="w-full max-w-2xl mt-4 md:mt-10 p-4 md:p-8 card rounded-xl shadow-2xl">
        <h1 class="text-3xl font-extrabold text-center mb-6 text-neon-green">
            ğŸ’³ Recargar Saldo
        </h1>
        
        <p class="text-gray-400 text-center mb-6">
            El monto mÃ­nimo de recarga es de <span class="text-neon-yellow font-bold">$3.00 USD</span>.
        </p>

        <div class="space-y-4 mb-8">
            <label for="countrySelect" class="block text-sm font-medium text-gray-300">Selecciona tu PaÃ­s:</label>
            <select id="countrySelect" 
                    class="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-neon-cyan transition duration-150">
                <option value="" disabled selected>-- Seleccionar PaÃ­s --</option>
                <option value="ARG">ğŸ‡¦ğŸ‡· Argentina (ARS)</option>
                <option value="BOL">ğŸ‡§ğŸ‡´ Bolivia (BOB)</option>
                <option value="BRL">ğŸ‡§ğŸ‡· Brasil (BRL)</option>
                <option value="CHL">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="COL">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="DOM">ğŸ‡©ğŸ‡´ RepÃºblica Dominicana (DOP)</option>
                <option value="ECU">ğŸ‡ªğŸ‡¨ Ecuador (USD)</option>
                <option value="USA">ğŸ‡ºğŸ‡¸ Estados Unidos (USD)</option>
                <option value="GTM">ğŸ‡¬ğŸ‡¹ Guatemala (GTQ)</option>
                <option value="HND">ğŸ‡­ğŸ‡³ Honduras (HNL)</option>
                <option value="MEX">ğŸ‡²ğŸ‡½ MÃ©xico (MXN)</option>
                <option value="NIC">ğŸ‡³ğŸ‡® Nicaragua (NIO)</option>
                <option value="PAN">ğŸ‡µğŸ‡¦ PanamÃ¡ (USD)</option>
                <option value="PRY">ğŸ‡µğŸ‡¾ Paraguay (PYG)</option>
                <option value="PER">ğŸ‡µğŸ‡ª PerÃº (PEN)</option> 
                <option value="VEN">ğŸ‡»ğŸ‡ª Venezuela (VES)</option> </select>

            <label for="usdAmountInput" class="block text-sm font-medium text-gray-300">Monto en USD (MÃ­nimo $3.00):</label> 
            <input id="usdAmountInput" type="number" min="3" step="0.01" value=""
                   class="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-neon-cyan text-xl font-bold transition duration-150"
                   placeholder="Monto a recargar (USD)">
            
            <p id="errorMsg" class="text-sm text-red-400 hidden">El monto mÃ­nimo de recarga es $3.00 USD.</p>

            <button id="rechargeBtn" disabled
                    class="w-full py-3 px-4 rounded-lg neon-btn uppercase shadow-neon-green disabled:bg-gray-600 disabled:shadow-none disabled:cursor-not-allowed">
                Mostrar MÃ©todos de Pago
            </button>
        </div>

        <div id="paymentMethodsContainer" class="hidden">
            <h2 class="text-2xl font-bold border-b border-gray-700 pb-2 mb-4 text-neon-cyan">
                ğŸ’° Datos de Pago y MÃ©todos
            </h2>

            <div class="space-y-2 mb-6">
                <div class="flex justify-between items-center text-lg">
                    <span class="font-semibold text-gray-300">PaÃ­s Seleccionado:</span>
                    <span id="displayCountry" class="font-bold text-neon-cyan">--</span>
                </div>
                <div class="flex justify-between items-center text-2xl font-extrabold p-2 rounded-lg bg-gray-700/30 border border-gray-700">
                    <span class="font-semibold text-gray-300">Monto a pagar:</span>
                    <span id="displayLocalAmount" class="text-neon-yellow">--</span>
                </div>
                <div class="text-sm text-center font-medium text-gray-400 mb-4">
                    Tasa utilizada: <span id="displayExchangeRate" class="text-rate">--</span>
                </div>

                <button id="copyAllBtn" class="w-full py-3 px-4 rounded-lg bg-neon-cyan hover:bg-cyan-500 transition duration-150 text-base font-bold text-gray-900 shadow-neon-blue mb-6">
                    ğŸ“„ Copiar TODOS los Datos de Pago
                </button>
            </div>

            <h3 class="text-xl font-semibold mb-3 text-gray-300">ğŸ’³ MÃ‰TODOS DE PAGO DISPONIBLES:</h3>
            
            <div id="countryMethods" class="space-y-5">
                </div>

            <div class="mt-8 p-4 bg-yellow-900/40 rounded-lg border-l-4 border-neon-yellow">
                <p class="font-bold text-neon-yellow">âš ï¸ IMPORTANTE:</p>
                <ul id="importanteList" class="list-none space-y-1 mt-2 text-sm text-gray-300">
                    </ul>
                <p class="font-bold text-neon-green mt-4 text-sm">
                    âœ… Una vez realizado el pago, serÃ¡ procesado automÃ¡ticamente.
                </p>
            </div>
        </div>

    </div>

    <script>
        // --- PLANTILLA UNIVERSAL DE COPIA ---
        // Combina el encabezado, el cuerpo (mÃ©todos) y el pie (importante) para generar el texto final.
        const UNIVERSAL_COPY_TEMPLATE = (countryData, localAmount, templateBody) => {
            // Se usa replace para quitar la bandera y el cÃ³digo de moneda del nombre que se muestra en el header de la plantilla.
            const countryName = countryData.name.replace(/.*?\s/, ''); 

            // Plantilla unificada que utiliza la moneda y el monto calculados.
            return `ğŸ’° *DATOS DE PAGO*

ğŸŒ *PaÃ­s:* ${countryName}
ğŸ’¸ *Monto a pagar:* ${countryData.currency} ${localAmount}

ğŸ’³ *MÃ‰TODOS DE PAGO DISPONIBLES:*

${templateBody}

âš ï¸ *IMPORTANTE:*
â€¢ EnvÃ­a exactamente ${countryData.currency} ${localAmount}
â€¢ Guarda el comprobante de pago
â€¢ EnvÃ­a el comprobante para confirmar el pago

âœ… *Una vez realizado el pago, serÃ¡ procesado automÃ¡ticamente.*`;
        }

        // --- DEFINICIÃ“N DE TASAS Y DATOS DE PAGO (INCLUYENDO VENEZUELA) ---
        const EXCHANGE_RATES = {
            ARG: {
                name: "ğŸ‡¦ğŸ‡· Argentina", 
                currency: "ARS",
                rate: 52000, 
                rateDisplay: "DÃ³lar a 52000 ARS",
                methods: [
                    {
                        name: "Uala",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "CVU: 0000007900203350273548 | Alias: C.CORREA1315.UALA",
                        info: "Transferencia UALA (DÃ³lar a 52000)", 
                        copyValue: "CVU: 0000007900203350273548 | Alias: C.CORREA1315.UALA"
                    }
                ],
                templateBody: `ğŸ”µ *Uala* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ CVU: 0000007900203350273548 | Alias: C.CORREA1315.UALA
ğŸ’¡ Transferencia UALA (DÃ³lar a 52000)`
            },
            BOL: {
                name: "ğŸ‡§ğŸ‡´ Bolivia",
                currency: "BOB",
                rate: 16, 
                rateDisplay: "DÃ³lar a 16 Bs", 
                methods: [
                    {
                        name: "Yape",
                        type: "EFECTIVO ğŸ’µ",
                        details: "NÂ° Cuenta: 62656932",
                        info: "Banca ElectrÃ³nica Yape (DÃ³lar a 16 Bs)", 
                        copyValue: "62656932"
                    },
                    {
                        name: "Yape QR",
                        type: "CÃ“DIGO QR ğŸ“±",
                        details: "CÃ³digo QR disponible en el link.",
                        info: "Escanea el cÃ³digo QR de Yape (DÃ³lar a 16 Bs)", 
                        isQR: true,
                        qrLink: "https://i.postimg.cc/YCg1rRGF/qrbolivia.jpg"
                    },
                    {
                        name: "BCP",
                        type: "TRANSFERENCIA ğŸ”·",
                        details: "NÂ° Cuenta: 20152008832355",
                        info: "Cuenta Ahorros BCP (DÃ³lar a 16 Bs)", 
                        copyValue: "20152008832355"
                    }
                ],
                templateBody: `ğŸ’œ *Yape* (ğŸ’µ EFECTIVO)
ğŸ“‹ NÂ° Cuenta: 62656932
ğŸ’¡ Banca ElectrÃ³nica Yape (DÃ³lar a 16 Bs)

ğŸ“± *Yape QR* (ğŸ’µ EFECTIVO)
ğŸ“‹ CÃ³digo QR disponible en el link.  
https://i.postimg.cc/YCg1rRGF/qrbolivia.jpg
ğŸ’¡ Escanea el cÃ³digo QR de Yape (DÃ³lar a 16 Bs)

ğŸ”· *BCP* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 20152008832355
ğŸ’¡ Cuenta Ahorros BCP (DÃ³lar a 16 Bs)`
            },
            BRL: {
                name: "ğŸ‡§ğŸ‡· Brasil",
                currency: "BRL",
                rate: 5.2, 
                rateDisplay: "DÃ³lar a 5.2 BRL", 
                methods: [
                    {
                        name: "PIX",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "Chave PIX: 91991076791",
                        info: "TransferÃªncia instantÃ¢nea PIX",
                        copyValue: "91991076791" 
                    }
                ],
                templateBody: `ğŸŸ¢ *PIX* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ Chave PIX: 91991076791
ğŸ’¡ TransferÃªncia instantÃ¢nea PIX`
            },
            CHL: {
                name: "ğŸ‡¨ğŸ‡± Chile",
                currency: "CLP",
                rate: 950, 
                rateDisplay: "DÃ³lar a 950 CLP (Tasa referencial)",
                methods: [
                    {
                        name: "Banco Estado (Caja Vecina)",
                        type: "EFECTIVO ğŸ’µ",
                        details: "Titular: XAVIER FUENZALIDA | RUT: 23.710.151-0 | CuentaRUT: 23710151",
                        info: "CAJA VECINA - DepÃ³sito en efectivo",
                        copyValue: "Titular: XAVIER FUENZALIDA | RUT: 23.710.151-0 | CuentaRUT: 23710151"
                    },
                    {
                        name: "Banco Estado (Transferencia)",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "Titular: XAVIER FUENZALIDA | RUT: 23.710.151-0 | CuentaRUT: 23710151",
                        info: "TRANSFERENCIA BANCARIA",
                        copyValue: "Titular: XAVIER FUENZALIDA | RUT: 23.710.151-0 | CuentaRUT: 23710151"
                    }
                ],
                templateBody: `ğŸª *Banco Estado (Caja Vecina)* (ğŸ’µ EFECTIVO)
ğŸ“‹ Titular: XAVIER FUENZALIDA | RUT: 23.710.151-0 | CuentaRUT: 23710151
ğŸ’¡ CAJA VECINA - DepÃ³sito en efectivo

ğŸŸ¢ *Banco Estado (Transferencia)* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ Titular: XAVIER FUENZALIDA | RUT: 23.710.151-0 | CuentaRUT: 23710151
ğŸ’¡ TRANSFERENCIA BANCARIA`
            },
            COL: {
                name: "ğŸ‡¨ğŸ‡´ Colombia",
                currency: "COP",
                rate: 4200, 
                rateDisplay: "DÃ³lar a 4200 COP (Tasa referencial)", 
                methods: [
                    {
                        name: "Bancolombia",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "NÂ° Cuenta: 76900007797",
                        info: "Transferencia Ahorros Bancolombia",
                        copyValue: "NÂ° Cuenta: 76900007797"
                    },
                    {
                        name: "Nequi",
                        type: "EFECTIVO ğŸ’µ",
                        details: "Nequi: 3016043120",
                        info: "EnvÃ­a dinero por Nequi",
                        copyValue: "Nequi: 3016043120"
                    },
                    {
                        name: "Nu Bank",
                        type: "TRANSFERENCIA ğŸŸ£",
                        details: "Llave Nu: @PMG3555",
                        info: "Transferencia Nu Bank",
                        copyValue: "Llave Nu: @PMG3555"
                    }
                ],
                templateBody: `ğŸŸ¡ *Bancolombia* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 76900007797
ğŸ’¡ Transferencia Ahorros Bancolombia

ğŸ”µ *Nequi* (ğŸ’µ EFECTIVO)
ğŸ“‹ Nequi: 3016043120
ğŸ’¡ EnvÃ­a dinero por Nequi

ğŸŸ£ *Nu Bank* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ Llave Nu: @PMG3555
ğŸ’¡ Transferencia Nu Bank`
            },
            DOM: {
                name: "ğŸ‡©ğŸ‡´ RepÃºblica Dominicana",
                currency: "DOP",
                rate: 68.00,
                rateDisplay: "DÃ³lar a 68 DOP",
                methods: [
                    {
                        name: "Banreservas",
                        type: "TRANSFERENCIA ğŸŸ¦",
                        details: "NÂ° Cuenta: 9601546622",
                        info: "Transferencia Cuenta Ahorro Banreservas",
                        copyValue: "NÂ° Cuenta: 9601546622"
                    },
                    {
                        name: "Banco Popular",
                        type: "TRANSFERENCIA ğŸ”´",
                        details: "NÂ° Cuenta: 837147719",
                        info: "Transferencia Cuenta Ahorro Popular",
                        copyValue: "NÂ° Cuenta: 837147719"
                    },
                    {
                        name: "BHD LeÃ³n",
                        type: "TRANSFERENCIA ğŸŸ¨",
                        details: "NÂ° Cuenta: 34478720012",
                        info: "Transferencia BHD LeÃ³n",
                        copyValue: "NÂ° Cuenta: 34478720012"
                    },
                    {
                        name: "Qik",
                        type: "EFECTIVO ğŸŸ¢",
                        details: "NÂ° Cuenta: 1002173707",
                        info: "Pago mÃ³vil Qik",
                        copyValue: "NÂ° Cuenta: 1002173707"
                    }
                ],
                templateBody: `ğŸŸ¦ *Banreservas* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 9601546622
ğŸ’¡ Transferencia Cuenta Ahorro Banreservas

ğŸ”´ *Banco Popular* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 837147719
ğŸ’¡ Transferencia Cuenta Ahorro Popular

ğŸŸ¨ *BHD LeÃ³n* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 34478720012
ğŸ’¡ Transferencia BHD LeÃ³n

ğŸŸ¢ *Qik* (ğŸ’µ EFECTIVO)
ğŸ“‹ NÂ° Cuenta: 1002173707
ğŸ’¡ Pago mÃ³vil Qik`
            },
            ECU: {
                name: "ğŸ‡ªğŸ‡¨ Ecuador",
                currency: "USD",
                rate: 1, 
                rateDisplay: "Tasa: 1.00 (Pago en USD)",
                methods: [
                    {
                        name: "Banco Pichincha",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "NÂ° Cuenta: 2207195565",
                        info: "Transferencia Cuenta Ahorro Pichincha",
                        copyValue: "NÂ° Cuenta: 2207195565"
                    }
                ],
                templateBody: `ğŸŸ¨ *Banco Pichincha* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 2207195565
ğŸ’¡ Transferencia Cuenta Ahorro Pichincha`
            },
            USA: {
                name: "ğŸ‡ºğŸ‡¸ Estados Unidos",
                currency: "USD",
                rate: 1, 
                rateDisplay: "Tasa: 1.00 (Pago en USD)",
                methods: [
                    {
                        name: "Zelle Tickets DAVID",
                        type: "EFECTIVO ğŸ’µ",
                        details: "NÃºmero: +1 (754) 317-1482",
                        info: "Banca ElectrÃ³nica Zelle",
                        copyValue: "+1 (754) 317-1482"
                    }
                ],
                templateBody: `ğŸ’ *Zelle Tickets DAVID* (ğŸ’µ EFECTIVO)
ğŸ“‹ NÃºmero: +1 (754) 317-1482
ğŸ’¡ Banca ElectrÃ³nica Zelle`
            },
            GTM: {
                name: "ğŸ‡¬ğŸ‡¹ Guatemala", 
                currency: "GTQ",
                rate: 7.8, 
                rateDisplay: "DÃ³lar a 7.8 GTQ", 
                methods: [
                    {
                        name: "Banrural",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "NÂ° Cuenta: 4431164091",
                        info: "Transferencia Banrural",
                        copyValue: "NÂ° Cuenta: 4431164091"
                    }
                ],
                templateBody: `ğŸŸ© *Banrural* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 4431164091
ğŸ’¡ Transferencia Banrural`
            },
            HND: {
                name: "ğŸ‡­ğŸ‡³ Honduras", 
                currency: "HNL",
                rate: 25.00, 
                rateDisplay: "DÃ³lar a 25.00 HNL", 
                methods: [
                    {
                        name: "Bampais",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "NÂ° Cuenta: 216400100524",
                        info: "Transferencia Cuenta Ahorros Bampais",
                        copyValue: "NÂ° Cuenta: 216400100524"
                    }
                ],
                templateBody: `ğŸ”µ *Bampais* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 216400100524
ğŸ’¡ Transferencia Cuenta Ahorros Bampais`
            },
            MEX: {
                name: "ğŸ‡²ğŸ‡½ MÃ©xico", 
                currency: "MXN",
                rate: 20.00, 
                rateDisplay: "DÃ³lar a 20.00 MXN", 
                methods: [
                    {
                        name: "Albo",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "NÂ° Cuenta: 721180100042683432",
                        info: "SOLO TRANSFERENCIAS (DÃ³lar a 20MX)",
                        copyValue: "NÂ° Cuenta: 721180100042683432"
                    },
                    {
                        name: "Nu MÃ©xico (OXXO)",
                        type: "EFECTIVO ğŸ’µ",
                        details: "5101 2506 8691 9389",
                        info: "SOLO DEPOSITOS OXXO (DÃ³lar a 20MX)",
                        copyValue: "5101 2506 8691 9389"
                    }
                ],
                templateBody: `ğŸ¦ *Albo* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 721180100042683432
ğŸ’¡ SOLO TRANSFERENCIAS (DÃ³lar a 20MX)

ğŸª *Nu MÃ©xico (OXXO)* (ğŸ’µ EFECTIVO)
ğŸ“‹ 5101 2506 8691 9389
ğŸ’¡ SOLO DEPOSITOS OXXO (DÃ³lar a 20MX)`
            },
            NIC: {
                name: "ğŸ‡³ğŸ‡® Nicaragua", 
                currency: "NIO",
                rate: 36.5, 
                rateDisplay: "DÃ³lar a 36.5 NIO", 
                methods: [
                    {
                        name: "BAC Nicaragua",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "NÂ° Cuenta: 371674409 | IBAN: NI37BAMC00000000000371674409",
                        info: "Transferencia Bancaria BAC (Tasa P2P Binance)",
                        copyValue: "NÂ° Cuenta: 371674409 | IBAN: NI37BAMC00000000000371674409"
                    }
                ],
                templateBody: `ğŸ¦ *BAC Nicaragua* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 371674409 | IBAN: NI37BAMC00000000000371674409
ğŸ’¡ Transferencia Bancaria BAC (Tasa P2P Binance)`
            },
            PAN: {
                name: "ğŸ‡µğŸ‡¦ PanamÃ¡", 
                currency: "USD",
                rate: 1, 
                rateDisplay: "Tasa: 1.00 (Pago en USD)", 
                methods: [
                    {
                        name: "Punto Pago Wally",
                        type: "EFECTIVO ğŸ’µ",
                        details: "NÂ° Cuenta: +584128975265",
                        info: "Banca ElectrÃ³nica Punto Pago Wally",
                        copyValue: "NÂ° Cuenta: +584128975265"
                    },
                    {
                        name: "Zinli",
                        type: "EFECTIVO ğŸ’µ",
                        details: "NÂ° Cuenta: chauran2001@gmail.com",
                        info: "Banca ElectrÃ³nica Zinli",
                        copyValue: "NÂ° Cuenta: chauran2001@gmail.com"
                    }
                ],
                templateBody: `ğŸŸ  *Punto Pago Wally* (ğŸ’µ EFECTIVO)
ğŸ“‹ NÂ° Cuenta: +584128975265
ğŸ’¡ Banca ElectrÃ³nica Punto Pago Wally

ğŸŸ£ *Zinli* (ğŸ’µ EFECTIVO)
ğŸ“‹ NÂ° Cuenta: chauran2001@gmail.com
ğŸ’¡ Banca ElectrÃ³nica Zinli`
            },
            PRY: {
                name: "ğŸ‡µğŸ‡¾ Paraguay",
                currency: "PYG",
                rate: 7300,
                rateDisplay: "DÃ³lar a 7300 PYG",
                methods: [
                    {
                        name: "Banco Itau",
                        type: "TRANSFERENCIA ğŸ¦",
                        details: "NÂ° Cuenta: 300406285 | Titular: DIEGO ARMANDO LEIVA ROA",
                        info: "Transferencia Bancaria Itau",
                        copyValue: "NÂ° Cuenta: 300406285 | Titular: DIEGO ARMANDO LEIVA ROA"
                    },
                    {
                        name: "Billetera Personal",
                        type: "EFECTIVO ğŸ’µ",
                        details: "Billetera Personal 0993363424",
                        info: "Transferencia a Billetera Personal",
                        copyValue: "Billetera Personal 0993363424"
                    }
                ],
                templateBody: `ğŸ¦ *Banco Itau* (ğŸ¦ TRANSFERENCIA)
ğŸ“‹ NÂ° Cuenta: 300406285 | Titular: DIEGO ARMANDO LEIVA ROA
ğŸ’¡ Transferencia Bancaria Itau

ğŸ’³ *Billetera Personal* (ğŸ’µ EFECTIVO)
ğŸ“‹ Billetera Personal 0993363424
ğŸ’¡ Transferencia a Billetera Personal`
            },
            PER: {
                name: "ğŸ‡µğŸ‡ª PerÃº",
                currency: "PEN",
                rate: 3.8,
                rateDisplay: "DÃ³lar a 3.8 PEN",
                methods: [
                    {
                        name: "Yape",
                        type: "EFECTIVO ğŸ’µ",
                        details: "NÂ° Cuenta: 954302258",
                        info: "Banca ElectrÃ³nica Yape",
                        copyValue: "NÂ° Cuenta: 954302258"
                    },
                    {
                        name: "Plin",
                        type: "EFECTIVO ğŸ’µ",
                        details: "NÂ° Cuenta: 954302258",
                        info: "Banca ElectrÃ³nica Plin",
                        copyValue: "NÂ° Cuenta: 954302258"
                    }
                ],
                templateBody: `ğŸŸ£ *Yape* (ğŸ’µ EFECTIVO)
ğŸ“‹ NÂ° Cuenta: 954302258
ğŸ’¡ Banca ElectrÃ³nica Yape

ğŸ”µ *Plin* (ğŸ’µ EFECTIVO)
ğŸ“‹ NÂ° Cuenta: 954302258
ğŸ’¡ Banca ElectrÃ³nica Plin`
            },
            // --- PAÃS AÃ‘ADIDO: VENEZUELA (VES) ---
            VEN: {
                name: "ğŸ‡»ğŸ‡ª Venezuela",
                currency: "VES",
                rate: 279,
                rateDisplay: "DÃ³lar a 279 VES",
                methods: [
                    {
                        name: "Pago MÃ³vil",
                        type: "EFECTIVO ğŸŸ¡",
                        details: "Pago mÃ³vil: 01020412897526531303430",
                        info: "Pago mÃ³vil interbancario (DÃ³lar a 279 Bs)",
                        copyValue: "Pago mÃ³vil: 01020412897526531303430"
                    }
                ],
                templateBody: `ğŸŸ¡ *Pago MÃ³vil* (ğŸ’µ EFECTIVO)
ğŸ“‹ Pago mÃ³vil: 01020412897526531303430
ğŸ’¡ Pago mÃ³vil interbancario (DÃ³lar a 279 Bs)`
            }
        };

        // Referencias a elementos del DOM
        const countrySelect = document.getElementById('countrySelect');
        const usdAmountInput = document.getElementById('usdAmountInput');
        const rechargeBtn = document.getElementById('rechargeBtn');
        const errorMsg = document.getElementById('errorMsg');
        const paymentMethodsContainer = document.getElementById('paymentMethodsContainer');
        const displayCountry = document.getElementById('displayCountry');
        const displayLocalAmount = document.getElementById('displayLocalAmount');
        const displayExchangeRate = document.getElementById('displayExchangeRate'); 
        const countryMethods = document.getElementById('countryMethods');
        const importanteList = document.getElementById('importanteList');
        const copyAllBtn = document.getElementById('copyAllBtn'); 

        // FunciÃ³n de utilidad para copiar al portapapeles
        function copyToClipboard(textToCopy, element, originalText) {
            const cleanedText = textToCopy.trim();
            
            const tempInput = document.createElement('textarea');
            tempInput.value = cleanedText;
            document.body.appendChild(tempInput);
            tempInput.select();
            
            try {
                // FunciÃ³n de copia antigua compatible con iframes
                document.execCommand('copy');
                element.textContent = 'Â¡Copiado! âœ…';
                // Cambio visual de confirmaciÃ³n
                element.classList.remove('bg-neon-cyan', 'hover:bg-cyan-500');
                element.classList.add('bg-neon-green', 'shadow-neon-green');
                
                setTimeout(() => {
                    element.textContent = originalText;
                    // Retorno a estilos originales
                    element.classList.remove('bg-neon-green', 'shadow-neon-green');
                    element.classList.add('bg-neon-cyan', 'hover:bg-cyan-500');
                }, 2000);
            } catch (err) {
                console.error('Error al copiar: ', err);
                element.textContent = 'Error al copiar';
            }
            document.body.removeChild(tempInput);
        }

        // FunciÃ³n principal para mostrar los mÃ©todos de pago
        function showPaymentMethods() {
            const selectedCountryCode = countrySelect.value;
            let usdAmount = parseFloat(usdAmountInput.value);
            
            // Validar monto mÃ­nimo (3 USD)
            if (isNaN(usdAmount) || usdAmount < 3) {
                errorMsg.classList.remove('hidden');
                paymentMethodsContainer.classList.add('hidden');
                return;
            }
            errorMsg.classList.add('hidden');

            const countryData = EXCHANGE_RATES[selectedCountryCode];
            
            // CÃ¡lculo del monto en moneda local basado en la tasa
            let rawLocalAmount = usdAmount * countryData.rate;
            let localAmount;

            // Formateo del monto local: COP, HND, NIO, PRY y VEN se redondean a 0 decimales. Otros a 2.
            if (selectedCountryCode === 'COL' || selectedCountryCode === 'HND' || selectedCountryCode === 'NIC' || selectedCountryCode === 'PRY' || selectedCountryCode === 'VEN') {
                 localAmount = rawLocalAmount.toFixed(0);
            } else {
                 localAmount = rawLocalAmount.toFixed(2);
            }
            
            // Actualizar encabezados y mostrar la tasa de cambio
            displayCountry.textContent = countryData.name;
            displayLocalAmount.textContent = `${countryData.currency} ${localAmount}`;
            displayExchangeRate.textContent = countryData.rateDisplay; 
            paymentMethodsContainer.classList.remove('hidden');

            // 1. GENERAR EL TEXTO COMPLETO A COPIAR usando la plantilla universal
            const allMethodsText = UNIVERSAL_COPY_TEMPLATE(countryData, localAmount, countryData.templateBody);
            
            // Asignar el texto al botÃ³n de copiar todo
            copyAllBtn.setAttribute('data-copy-value', allMethodsText);
            copyAllBtn.textContent = 'ğŸ“„ Copiar TODOS los Datos de Pago';
            copyAllBtn.style.display = 'block';

            // 2. Renderizar MÃ©todos de Pago
            countryMethods.innerHTML = ''; // Limpiar mÃ©todos anteriores
            countryData.methods.forEach(method => {
                const methodDiv = document.createElement('div');
                // SE AGREGA EL RESTO DE LA ESTRUCTURA DEL MÃ‰TODO DE PAGO QUE FALTABA
                methodDiv.classList.add('payment-detail', 'flex', 'flex-col', 'sm:flex-row', 'justify-between', 'items-start', 'sm:items-center', 'space-y-2', 'sm:space-y-0');
                
                // Contenido principal del mÃ©todo
                const contentHtml = `
                    <div>
                        <div class="text-lg font-bold text-neon-cyan">${method.name} <span class="text-sm font-normal text-gray-400">(${method.type})</span></div>
                        <div class="text-sm text-gray-300 font-mono break-all mt-1">${method.details}</div>
                        <div class="text-xs text-neon-pink mt-1">${method.info}</div>
                        ${method.isQR ? `<a href="${method.qrLink}" target="_blank" class="text-xs text-neon-green hover:underline block mt-1 font-semibold">Ver CÃ³digo QR ğŸ“±</a>` : ''}
                    </div>
                    <button class="copy-btn py-2 px-3 rounded-lg bg-neon-cyan hover:bg-cyan-500 transition duration-150 text-sm font-bold text-gray-900 flex-shrink-0" 
                            data-copy-value="${method.copyValue}">
                        ğŸ“‹ Copiar Datos
                    </button>
                `;
                
                methodDiv.innerHTML = contentHtml;
                countryMethods.appendChild(methodDiv);
            });
            // FIN DE LA ESTRUCTURA DEL MÃ‰TODO DE PAGO
            
            // 3. Renderizar la secciÃ³n IMPORTANTE
            importanteList.innerHTML = '';
            
            // Puntos fijos de importancia
            const importancePoints = [
                `AsegÃºrate de enviar exactamente **${countryData.currency} ${localAmount}** para que tu recarga se acredite correctamente.`,
                'Guarda el comprobante de pago hasta que tu saldo se vea reflejado en tu cuenta.',
                'En caso de cualquier problema, contacta a soporte enviando tu comprobante de pago.'
            ];

            importancePoints.forEach(pointText => {
                const li = document.createElement('li');
                li.innerHTML = `â€¢ ${pointText}`;
                importanteList.appendChild(li);
            });

            // 4. Re-adjuntar Event Listeners para los nuevos botones de copiar
            document.querySelectorAll('.copy-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const valueToCopy = e.currentTarget.getAttribute('data-copy-value');
                    copyToClipboard(valueToCopy, e.currentTarget, 'ğŸ“‹ Copiar Datos');
                });
            });

        }

        // FunciÃ³n para validar la entrada y habilitar/deshabilitar el botÃ³n
        function validateInput() {
            const usdAmount = parseFloat(usdAmountInput.value);
            const countrySelected = countrySelect.value !== "";
            
            const isValid = countrySelected && !isNaN(usdAmount) && usdAmount >= 3;
            
            rechargeBtn.disabled = !isValid;
            
            if (isValid) {
                errorMsg.classList.add('hidden');
            } else if (!isNaN(usdAmount) && usdAmount < 3) {
                 errorMsg.classList.remove('hidden');
            } else {
                 errorMsg.classList.add('hidden');
            }
            
            // Ocultar mÃ©todos de pago si se invalida la selecciÃ³n
            if (!isValid) {
                 paymentMethodsContainer.classList.add('hidden');
            }
        }

        // --- EVENT LISTENERS ---
        
        // 1. Evento para el botÃ³n principal
        rechargeBtn.addEventListener('click', showPaymentMethods);
        
        // 2. Eventos para la validaciÃ³n de paÃ­s y monto
        countrySelect.addEventListener('change', validateInput);
        usdAmountInput.addEventListener('input', validateInput);
        
        // 3. Evento para el botÃ³n de copiar todo
        copyAllBtn.addEventListener('click', (e) => {
            const valueToCopy = e.currentTarget.getAttribute('data-copy-value');
            copyToClipboard(valueToCopy, e.currentTarget, 'ğŸ“„ Copiar TODOS los Datos de Pago');
        });

        // Inicializar el estado del botÃ³n al cargar la pÃ¡gina
        validateInput();
    </script>
</body>
</html>
